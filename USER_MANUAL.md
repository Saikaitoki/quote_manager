# 見積管理システム ユーザーマニュアル

## 1. 概要
このシステムは、見積書の作成、管理、および在庫確保状況の追跡を行うためのWebアプリケーションです。Kintoneとの連携機能を持ち、モバイルデバイス（スマートフォン、タブレット）での操作にも最適化されています。

## 2. インストール・アクセス
- **Webブラウザ**: Chrome, Safari, Edgeなどの最新ブラウザでアクセスしてください。
- **モバイルアプリとして使用**: スマートフォンでアクセスし、「ホーム画面に追加」を行うことで、アプリのように全画面で使用することができます（PWA対応）。

## 3. 見積一覧画面（ホーム）
見積書の一覧が表示されます。

- **表示形式**:
    - **PC**: 表形式で詳細が表示されます。
    - **スマホ**: カード形式で見やすく表示されます。
- **検索・フィルタ**:
    - **キーワード**: 得意先コードや得意先名で検索できます。
    - **担当者**: 担当者名で絞り込みが可能です。
    - **同期状態**: 「すべて」「同期済」「未同期」「失敗」から選択できます。
    - **見積作成日**: 日付範囲を指定して表示できます。
- **Kintone同期**: 画面上部の「kintone から最新を取得」ボタンを押すと、Kintone上のデータを取得し、最新の状態に更新します。
- **在庫ステータス変更**: 一覧から直接「在庫確保中」「在庫解放済」を切り替えることができます。

## 4. 見積の作成・編集
「＋ 新規作成」ボタン、または一覧の「編集」ボタンから行います。

### 基本情報
以下の情報を入力・編集します。
- 得意先コード / 得意先名
- 納入先名
- 担当者コード / 担当者名
- 備考など

### 明細（商品）の追加
「明細追加」ボタンからモーダル画面を開き、商品を追加します。

1.  **商品検索**:
    - **商品コード入力**: JANコードまたは商品コードを入力し、「検索」ボタンを押すと商品情報が自動入力されます。
    - **スキャナー対応**: バーコードリーダー（スキャナー）を使用する場合、コードを読み取ると自動的に検索が行われ、カーソルは入力欄に戻ります（連続スキャンが可能）。
2.  **数量・掛率入力**: 必要な数量と掛率を入力します。
    - 電卓（テンキー）パネルが必要な場合は、設定により表示可能です。
3.  **追加**: 「追加」ボタンで明細行に反映されます。

### 明細の編集・削除
- 一覧に追加された商品の数量や掛率は、直接編集可能です。
- 「削除」ボタンで明細行を削除できます。

## 5. モバイルでの利用
スマートフォンでの利用時に便利な機能があります。

- **スキャンモード**: JANコードや商品コードの入力時に、自動的に検索を実行し、入力フィールドにフォーカスを戻すことで、スキャナーを使った連続作業をスムーズに行えます。
- **テンキー**: 数値入力時に独自のテンキーパッドを表示させることが可能です（設定による）。

## 6. よくある質問 (Q&A)

**Q. Kintoneのデータが反映されません。**
A. 一覧画面の「kintone から最新を取得」ボタンを押してください。それでも反映されない場合は、作成日が検索範囲に含まれているか確認してください。

**Q. スキャナーで読み取っても反応しません。**
A. 入力欄にカーソルが当たっていることを確認してください。また、端末のキーボード設定が日本語入力（IME）になっていると誤動作することがあるため、半角英数モードをお試しください。

**Q. 在庫確保のステータスとは何ですか？**
A. その見積の商品在庫を確保しているか（「確保中」）、確保を解除したか（「解放済」）を管理するフラグです。実際の在庫引き落とし処理と連動します。
